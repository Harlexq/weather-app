<section class="weat">
  <aside class="sidebar">
    <form
      class="input-field"
      [formGroup]="citfySearhForm"
      (ngSubmit)="search()"
    >
      <input
        type="text"
        placeholder="Şehir adı giriniz..."
        class="input"
        [formControl]="Name"
      />
      <button
        class="clear-input"
        type="button"
        *ngIf="Name.value"
        (click)="clearInput()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
      <button class="search-input" type="submit">
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>

    <div class="aside-content" *ngIf="currentWeather">
      <h2 class="title">Anlık Hava Durumu Bilgisi</h2>
      <div class="instant-head">
        <h3>{{ currentWeather.city_name }}</h3>
        <div class="head-item">
          <p>Anlık</p>
          <p class="instant-date">
            {{ currentWeather.datetime }}
          </p>
        </div>
      </div>
      <div class="weat-last-info">
        <div class="weat-weather">
          <h3>Sıcaklık:</h3>
          <p>{{ currentWeather.temp }} °C</p>
        </div>
        <div class="weat-weather">
          <img
            [src]="iconLink + currentWeather.weather.icon + '.png'"
            class="weat-icon"
          />
          <p>{{ currentWeather.weather.description }}</p>
        </div>
      </div>
      <div class="instant-info">
        <div class="instant-foot">
          <h2 class="title">Hava Durumu Bilgisi</h2>
          <div class="instant-items">
            <article class="instant-item">
              <h4>Nem:</h4>
              <p>{{ currentWeather.rh }}%</p>
            </article>
            <article class="instant-item">
              <h4>Rüzgar Hızı:</h4>
              <p>{{ currentWeather.wind_spd }}</p>
            </article>
            <article class="instant-item">
              <h4>Rüzgar Yönü:</h4>
              <p>{{ currentWeather.wind_cdir }}</p>
            </article>
            <article class="instant-item">
              <h4>Basınç:</h4>
              <p>{{ currentWeather.pres }} hPa</p>
            </article>
            <article class="instant-item">
              <h4>Görüş Mesafesi:</h4>
              <p>{{ currentWeather.vis }} km</p>
            </article>
          </div>
        </div>
      </div>
    </div>
  </aside>
  <main class="main">
    <div class="tab">
      <button
        class="tab-btn"
        (click)="setActiveButton('current')"
        [ngClass]="{ active: activeButton === 'current' }"
        [disabled]="Name.value == ''"
      >
        Anlık
      </button>
      <button
        class="tab-btn"
        (click)="setActiveButton('daily')"
        [ngClass]="{ active: activeButton === 'daily' }"
        [disabled]="Name.value == ''"
      >
        Bugün
      </button>
      <button
        class="tab-btn"
        (click)="setActiveButton('weekly')"
        [ngClass]="{ active: activeButton === 'weekly' }"
        [disabled]="Name.value == ''"
      >
        Haftalık
      </button>
    </div>
    <div class="tab-main">
      <div class="today" *ngIf="currentWeather && activeButton == 'current'">
        <div class="head">
          <h2>Gaziantep</h2>
          <p>2024/58/54</p>
        </div>
        <div class="content">
          <div class="content-item">
            <h2 class="title">Anlık Hava Durumu Bilgisi</h2>
            <div class="weat-last-info">
              <div class="weat-weather">
                <h3>Sıcaklık:</h3>
                <p>{{ currentWeather.temp }} °C</p>
              </div>
              <div class="weat-weather">
                <img
                  [src]="iconLink + currentWeather.weather.icon + '.png'"
                  class="weat-icon"
                />
                <p>{{ currentWeather.weather.description }}</p>
              </div>
            </div>
            <div class="weat-info">
              <article class="weat-info-item">
                <h3>Nem</h3>
                <p>{{ currentWeather.rh }} %</p>
              </article>
              <article class="weat-info-item">
                <h3>Rüzgar Hızı</h3>
                <p>{{ currentWeather.wind_spd }}</p>
              </article>
              <article class="weat-info-item">
                <h3>Rüzgar Yönü</h3>
                <p>{{ currentWeather.wind_cdir }}</p>
              </article>
              <article class="weat-info-item">
                <h3>Basınç</h3>
                <p>{{ currentWeather.pres }} hPa</p>
              </article>
              <article class="weat-info-item">
                <h3>Görüş Mesafesi</h3>
                <p>{{ currentWeather.vis }} km</p>
              </article>
            </div>
          </div>
        </div>
      </div>
      <div
        class="today"
        *ngIf="dailyWeather && dailyWeatherData && activeButton == 'daily'"
      >
        <div class="head">
          <h2>{{ dailyWeather.city_name }}</h2>
          <p>{{ getDayName(dailyWeatherData.datetime) }}</p>
        </div>
        <div class="content">
          <div class="content-item">
            <h2 class="title">Bugünün Hava Durumu Bilgisi</h2>
            <div class="weat-last-info">
              <div class="weat-weather">
                <h3>Sıcaklık:</h3>
                <p>{{ dailyWeatherData.temp }} °C</p>
              </div>
              <div class="weat-weather">
                <img
                  [src]="iconLink + dailyWeatherData.weather.icon + '.png'"
                  class="weat-icon"
                />
                <p>{{ dailyWeatherData.weather.description }}</p>
              </div>
            </div>
            <div class="weat-info">
              <article class="weat-info-item">
                <h3>Maximum Sıcaklık</h3>
                <p>{{ dailyWeatherData.max_temp }} °C</p>
              </article>
              <article class="weat-info-item">
                <h3>Minumum Sıcaklık</h3>
                <p>{{ dailyWeatherData.min_temp }} °C</p>
              </article>
              <article class="weat-info-item">
                <h3>Nem</h3>
                <p>{{ dailyWeatherData.rh }} %</p>
              </article>
              <article class="weat-info-item">
                <h3>Rüzgar Hızı</h3>
                <p>{{ dailyWeatherData.wind_spd }}</p>
              </article>
              <article class="weat-info-item">
                <h3>Rüzgar Yönü</h3>
                <p>{{ dailyWeatherData.wind_cdir }}</p>
              </article>
              <article class="weat-info-item">
                <h3>Basınç</h3>
                <p>{{ dailyWeatherData.pres }} hPa</p>
              </article>
              <article class="weat-info-item">
                <h3>Görüş Mesafesi</h3>
                <p>{{ dailyWeatherData.vis }} km</p>
              </article>
            </div>
          </div>
        </div>
      </div>
      <div class="weekly" *ngIf="weeklyWeather && activeButton == 'weekly'">
        <div class="today">
          <div class="head">
            <h2>{{ weeklyWeather.city_name }}</h2>
            <p>Pazartesi</p>
          </div>
          <div class="content">
            <div class="content-item">
              <h2 class="title">Haftalık Hava Durumu Bilgisi</h2>
              <div class="weat-last-info">
                <div class="weat-weather">
                  <h3>Sıcaklık:</h3>
                  <p>28 °C</p>
                </div>
                <div class="weat-weather">
                  <img [src]="iconLink + 'c01n' + '.png'" class="weat-icon" />
                  <p>Gök Gürültülü</p>
                </div>
              </div>
              <div class="weat-info">
                <button
                  type="button"
                  class="week-info-item"
                  *ngFor="let data of weeklyWeather.data"
                >
                  <div class="week-head">
                    <h3>{{ weeklyWeather.city_name }}</h3>
                    <p>{{ getDayName(data.datetime) }}</p>
                  </div>
                  <div class="week-content">
                    <img
                      [src]="iconLink + data.weather.icon + '.png'"
                      class="weat-icon"
                    />
                    <p>{{ data.weather.description }}</p>
                  </div>
                  <div class="week-footer">
                    <button
                      type="button"
                      (click)="weeklyReadMore(data.datetime)"
                      class="footer-read-more"
                    >
                      Detaylı Gör
                      <i class="fa-solid fa-angle-right"></i>
                    </button>
                  </div>
                </button>
              </div>
              <div class="weat-read-more" *ngIf="weeklyWeatherData">
                <h2 class="title">
                  {{ getDayName(weeklyWeatherData.datetime) }}'nin Hava Durum
                  Bilgisi
                </h2>
                <div class="weat-info">
                  <article class="weat-info-item">
                    <h3>Maximum Sıcaklık</h3>
                    <p>{{ weeklyWeatherData.max_temp }} °C</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Minumum Sıcaklık</h3>
                    <p>{{ weeklyWeatherData.min_temp }} °C</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Nem</h3>
                    <p>{{ weeklyWeatherData.rh }} %</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Rüzgar Hızı</h3>
                    <p>{{ weeklyWeatherData.wind_spd }}</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Rüzgar Yönü</h3>
                    <p>{{ weeklyWeatherData.wind_cdir }}</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Basınç</h3>
                    <p>{{ weeklyWeatherData.pres }} hPa</p>
                  </article>
                  <article class="weat-info-item">
                    <h3>Görüş Mesafesi</h3>
                    <p>{{ weeklyWeatherData.vis }} km</p>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="" *ngIf="Name.value == ''">Name Boş</div>
    </div>
  </main>
</section>
